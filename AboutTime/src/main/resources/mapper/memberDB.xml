<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.about_time.member.mapper.MemberMapper">

    <select id="getAll" resultType="com.about_time.member.vo.Member">
        SELECT * FROM t_member
    </select>
    
    <select id="findMemberByUid" resultType="com.about_time.member.vo.Member">
    	SELECT * FROM about_time.Member WHERE uid = #{uid}
    </select>
    
    <select id="findMemberRoleByUid" resultType="com.about_time.member.vo.MemberRole">
    	SELECT * FROM about_time.MemberRole WHERE uid = #{uid}
    </select>
    
    <insert id="insertMember" parameterType="com.about_time.member.vo.Member">
    	INSERT INTO about_time.Member(uid,upw,email,regDate,updateDate) VALUES (#{uid},#{upw},#{email},now(),now())
    </insert>
    
    <insert id="insertMemberRole" parameterType="com.about_time.member.vo.MemberRole">
    	INSERT INTO about_time.MemberRole(uid,roleName) VALUES (#{uid},#{roleName})
    </insert>
    
    <select id="existsByUid" resultType="Integer">
		select EXISTS (select uid from Member where uid=#{uid}) as success
    </select>
</mapper>